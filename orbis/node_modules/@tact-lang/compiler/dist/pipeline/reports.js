"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.doReports = doReports;
const writeReport_1 = require("../generator/writeReport");
function doReports(bCtx, packages) {
    const { project, config, logger } = bCtx;
    logger.info("   > Reports");
    for (const pkg of packages) {
        logger.info("   > " + pkg.name);
        try {
            const report = (0, writeReport_1.writeReport)(bCtx.ctx, pkg);
            const pathBindings = project.resolve(config.output, config.name + "_" + pkg.name + ".md");
            project.writeFile(pathBindings, report);
        }
        catch (e) {
            const error = e;
            error.message = `Report generation crashed: ${error.message}`;
            logger.error(error);
            bCtx.errorMessages.push(error);
            return false;
        }
    }
    return true;
}
